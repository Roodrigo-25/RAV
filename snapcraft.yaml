name: anthwlock-untrunc
version: "1.0-git"
summary: Restore a damaged (truncated) mp4, m4v, mov, 3gp video
description: |
  Restore a damaged (truncated) mp4, m4v, mov, 3gp video. Provided you have a similar not broken video. And some luck.
license: GPL-2.0
base: core20

grade: stable
confinement: strict

apps:
  anthwlock-untrunc: 
    command: app/untrunc
    plugs: [home, removable-media]

parts:
  anthwlock-untrunc:
    source: .
    plugin: make
    override-build: |
      echo "Running override-build script"
      make FF_VER=shared
      mkdir -p $SNAPCRAFT_PART_INSTALL/app
      rm -rf $SNAPCRAFT_PART_INSTALL/app/*
      mv untrunc $SNAPCRAFT_PART_INSTALL/app
    build-packages:
      - g++
      - make
      - libavutil-dev
      - libavformat-dev
   
    stage-packages:
      - libavformat58
      - libavcodec58
      - libavutil56
      
